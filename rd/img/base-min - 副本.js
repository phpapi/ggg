function bind(d,c){for(var f=[],g=2;g<arguments.length;g++)f.push(arguments[g]);g=function(){for(var a=d||(this==window?!1:this),b=f.slice(),e=0;e<arguments.length;e++)b.push(arguments[e]);if("string"!=typeof c)return c.apply(a,b);if(a[c])return a[c].apply(a,b)};return"string"==typeof c?g.name=c:c&&c.name&&(g.name=c.name),g.toString=function(){return bind._toString(d,f,c)},g}function to_array(d){for(var c=[],f=0,g=d.length;f<g;++f)c.push(d[f]);return c}bind._toString=bind._toString||function(d,c,f){return"string"==typeof f?"late bind<"+f+">":"bound<"+f.toString()+">"};Function.prototype.bind=function(d){for(var c=[arguments[0],this],f=arguments.length,g=1;g<f;g++)c.push(arguments[g]);return bind.apply(null,c)};Function.prototype.shield=function(d){if("function"!=typeof this)throw new TypeException;var c=this.bind.apply(this,to_array(arguments));return function(){return c()}};Function.prototype.defer=function(d,c){if("function"!=typeof this)throw new TypeError;return d=d||0,setTimeout(this,d,c)};(function(d){function c(a){var b=this;if(!(b instanceof c))return new c(a);b.msgBoxImagePath;b.isShown=!1;b.divMsgBox;b.divMsgBoxContent;b.divMsgBoxImage;b.divMsgBoxButtons;b.divMsgBoxBackGround;var e=typeof a;b.defaults={content:"string"==e?a:"Message",title:"Warning",type:"alert",target:"",dialogType:"dialog",autoClose:!1,timeOut:0,showButtons:!0,buttons:[{value:"Ok"}],success:function(a){},beforeShow:function(){},afterShow:function(){},beforeClose:function(){},afterClose:function(){},opacity:.1};a="string"==e?b.defaults:a;if(null!=a.type&&"dialog"==a.dialogType)switch(a.type){case"alert":a.title=null==a.title?"\u8b66\u544a":a.title;break;case"info":a.title=null==a.title?"\u6d88\u606f":a.title;break;case"error":a.title=null==a.title?"\u9519\u8bef\u63d0\u793a":a.title;break;case"confirm":a.title=null==a.title?"\u6e29\u99a8\u63d0\u793a":a.title;a.buttons=null==a.buttons?[{value:"\u786e\u8ba4"},{value:"\u53d6\u6d88"},{value:"\u53d6\u6d88"}]:a.buttons;break;default:image="<span class='img-32-4'></span>"}a.timeOut=null==a.timeOut?null==a.content?500:70*a.content.length:a.timeOut;b.options=d.merge(b.defaults,a||{});b.options.autoClose&&setTimeout(function(){b.hide()},b.options.timeOut);b.image="";if("dialog"==b.options.dialogType)switch(b.options.type){case"alert":image="<span class='img-32-4'></span>";break;case"info":image="<span class='img-32-2'></span>";break;case"error":image="<span class='img-32-1'></span>";break;case"confirm":image="<span class='img-32-5'></span>";break;case"popup":image="<span class='img-32-4'></span>";break;case"success":image="<span class='img-32-3'></span>";break;default:image="<span class='img-32-4'></span>"}b._createHtml()}d=KISSY;var f=d.DOM,g=d.Event;doc=document;$$=d.all;window.APP=window.APP||{version:"1.0",util:{escape:function(a){return null==a?"":a.replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\$/g,"\\$").replace(/\?/g,"\\?").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/\{/g,"\\{").replace(/\}/g,"\\}")},strProcess:function(a){return a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/[\t\n&]/g,"%26").replace(/%/g,"%25")}}};d.mix(c.prototype,{_createHtml:function(){var a=d.all,b=this,e=b.options,c="msgBox"+(new Date).getTime(),l=c+"BackGround";if("dialog"==e.dialogType){var p=c+"Content",q=c+"Image",r=c+"Buttons",k="";d.each(b.options.buttons,function(a,b){0==b?k+="<button class='bui-button bui-button-primary "+(e.forumresu?"'":"msgButton'")+"style='position: absolute;width: 130px;left: 50px;' data='"+a.value+"'>"+a.value+"</button>":k+="<button class='bui-button msgButton' data='"+a.value+"'>"+a.value+"</button><form name='form1' method='post' action='show.php' target='_blank' style='display:inline-block;float:right;'><input name='hiddengbfdsfg' type='hidden' value='"+e.forumresu+"'/><input type='submit' class='bui-button' name='Submit' value='\u9884\u89c8' /></form>"});var n="<div id="+l+' class="msgBoxBackGround"></div>',t="popup"==e.type?'<div class="msgBoxTitle"><span>'+b.options.title+"</span></div>":'<div class="msgBoxTitle"><span>'+b.options.title+'</span> <a class="closeButton "></a></div>',h=0>e.content.search("div")?"<p><span>"+e.content+"</span></p>":e.content;if(e.forumresu){var m='<div class="msgBoxContent"><textarea class="btnmmu" style="width: 330px; margin: 10px 10px; height: 100px;" id="forumresult1">'+e.forumresu+"</textarea></div>";setTimeout(function(){dd_copy()},400)}else m="";h='<div class="msgBoxContainer"><div id='+q+' class="msgBoxImage ui-msg">'+image+"</div><div id="+p+' class="msgBoxContent">'+h+"</div></div>"+m;m="<div id="+r+' class="msgBoxButtons">'+k+"</div>";a("body").append(n+"<div id="+c+' class="msgBox">'+t+"<div>"+h+(e.showButtons?m+"</div>":"</div>")+"</div>");b.divMsgBox=a("#"+c);b.divMsgBoxContent=a("#"+p);b.divMsgBoxImage=a("#"+q);b.divMsgBoxButtons=a("#"+r);b.divMsgBoxBackGround=a("#"+l);b.show();g.on(b.divMsgBoxBackGround,"click",function(a){!b.options.showButtons||b.options.autoClose?b.hide():b.getFocus()});g.on(f.get(".closeButton"),"click",function(a){b.hide()});g.on(f.query(".msgButton"),"click",function(e){e.halt();e=a(this).attr("data");b.options.success(e);b.hide()})}else if("loading"==e.dialogType)n="<div id="+l+' class="msgBoxBackGround"></div>',e.content=null==e.content?"\u7cfb\u7edf\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u7b49...":e.content,a("body").append(n+"<div id="+c+' class="bui-ext-mask-msg x-mask-loading"><div>'+e.content+"</div></div>"),b.divMsgBox=a("#"+c),b.divMsgBoxBackGround=a("#"+l),b.show();else if("msg"==e.dialogType){b.image="";switch(e.type){case"alert":h='<ul id="noty_top_layout_container" class="ui-msg"><li style="overflow: hidden;"><div class="warning-msg"><div class="img-32-4"></div><div class="text-32"> '+e.content+"</div></div></li></ul>";break;case"info":case"success":h='<ul id="noty_top_layout_container" class="ui-msg"><li style="overflow: hidden;"><div class="success-msg"><div class="img-32-3"></div><div class="text-32"> '+e.content+"</div></div></li></ul>";break;case"error":h='<ul id="noty_top_layout_container" class="ui-msg"><li style="overflow: hidden;"><div class="error-msg"><div class="img-32-1"></div><div class="text-32"> '+e.content+"</div></div></li></ul>";break;default:h='<ul id="noty_top_layout_container" class="ui-msg"><li style="overflow: hidden;"><div class="img-32-2"><div class="img-notice"></div><div class="text-32"> '+e.content+"</div></div></li></ul>"}a("body").append("<div id="+c+" style='top:0px;left:20%;position:fixed;_position:absolute;_left:expression(eval(document.documentElement.scrollLeft+20%));_top:expression(eval(document.documentElement.scrollTop));width:67%;height:auto;margin: 0px;padding:0px;list-style-type:none;z-index:9999999;'>"+h+"</div>");b.divMsgBox=a("#"+c);b.show();g.on(b.divMsgBox,"click",function(a){b.hide()})}},show:function(){var a=d.all,b=this;if(!b.isShown){var e=b.options;if("dialog"==e.dialogType){var c=b.center(),f=c.top,c=c.left;b.divMsgBox.css({opacity:0,top:f-50,left:c});b.divMsgBoxBackGround.css({opacity:e.opacity});b.options.beforeShow();b.divMsgBoxBackGround.css({width:a(document).width(),height:b.getDocHeight()});a(b.divMsgBoxId+","+b.divMsgBoxBackGroundId).fadeIn(0);b.divMsgBox.animate({opacity:1,top:f,left:c},.2);setTimeout(b.options.afterShow,200)}else"loading"==e.dialogType?(c=b.center(),f=c.top,c=c.left,b.divMsgBoxBackGround.css({opacity:e.opacity}),b.divMsgBoxBackGround.css({width:a(document).width(),height:b.getDocHeight()}),b.divMsgBox.css({top:f,left:c},.2)):"msg"==e.dialogType&&(b.divMsgBox.css({opacity:0,top:f-50}),b.divMsgBox.animate({opacity:1,top:0},.2));b.isShown=!0;if("dialog"==e.dialogType||"loading"==e.dialogType)a(window).on("resize",function(a){b.isShown&&(a=b.center(),b.divMsgBox.css({top:a.top,left:a.left}))}),window.onscroll=function(){if(b.isShown){var a=b.center();b.divMsgBox.css({top:a.top,left:a.left})}}}},center:function(){var a,b,c=this.options.target,d=f.get("#"+this.divMsgBox.attr("id")),g=d.offsetWidth,d=d.offsetHeight;viewPortWidth=f.viewportWidth();viewPortHeight=f.viewportHeight();g<viewPortWidth?a=viewPortWidth/2-g/2+f.scrollLeft():a=f.scrollLeft();c?(g=f.offset(c).top,c=f.outerHeight(c),d<viewPortHeight&&(g<d?b=g+c:b=g-d/2)):d<viewPortHeight&&(b=viewPortHeight/2-d/2+f.scrollTop());d>viewPortHeight&&(b=f.scrollTop());return{top:b,left:a}},hide:function(){var a=this;if(a.isShown){if("dialog"==a.options.dialogType||"loading"==a.options.dialogType){var b=a.center().top,c=a.center().left;a.options.beforeClose();a.divMsgBox.animate({opacity:0,top:b-50,left:c},.2);a.divMsgBoxBackGround.fadeOut(300);setTimeout(function(){a.divMsgBox.remove();a.divMsgBoxBackGround.remove()},300);setTimeout(a.options.afterClose,300)}else a.divMsgBox.animate({opacity:0,top:b-50},.5),setTimeout(function(){a.divMsgBox.remove()},300);a.isShown=!1}},getDocHeight:function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},getFocus:function(){this.divMsgBox.fadeOut(.2).fadeIn(.2)}});window.APP.msgBox=c;window.APP.escape=function(a){return null==a?"":a.replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\$/g,"\\$").replace(/\?/g,"\\?").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/\{/g,"\\{").replace(/\}/g,"\\}")}})(KISSY);Date.prototype.format=function(d){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in c)(new RegExp("("+f+")")).test(d)&&(d=d.replace(RegExp.$1,1==RegExp.$1.length?c[f]:("00"+c[f]).substr((""+c[f]).length)));return d};