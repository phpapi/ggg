!function(){function e(t,o,i){function s(d,r){if(!o[d]){if(!t[d]){var l="function"==typeof require&&require;if(!r&&l)return l(d,!0);if(n)return n(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var p=o[d]={exports:{}};t[d][0].call(p.exports,function(e){var o=t[d][1][e];return s(o||e)},p,p.exports,e,t,o,i)}return o[d].exports}for(var n="function"==typeof require&&require,d=0;d<i.length;d++)s(i[d]);return s}return e}()({1:[function(e,t,o){!function(e){"use strict";function t(){for(var e,t,o=document.querySelector("body").classList,i=0,s=0;s<o.length;s++)switch(o[s]){case"page":e=2;break;case"category":e=3;break;case"single":e=4;break;case"home":e=1}if(2==e)for(s=0;s<o.length;s++)(t=o[s].match(/page-id-(\d+)$/))&&(i=t[1]);else if(4==e)for(s=0;s<o.length;s++)(t=o[s].match(/postid-(\d+)$/))&&(i=t[1]);return{type:e,id:i}}function o(t){this.config={el:"#wrap",type:"move"},this.config=e.extend(!0,this.config,t),this.$el=e(this.config.el),this.MID=0,this.init()}var i=e.extend(!0,{},parent._wpCustomizeSettings.settings._page_modules.value),s=wp.customize,n={};window.modules_render=null,i||(i={}),s.Wpcom=s.Messenger.extend({initialize:function(t,o){var i=this;s.Messenger.prototype.initialize.call(this,t,o),e(document.body).off("click.wpcom").on("click.wpcom","a",function(t){var o=e(this);if(t.preventDefault(),o.attr("href").match(/^#/i))return!1;i.send("scroll",0),i.send("url",o.prop("href"))})}}),e(document).ready(function(){if(s.settings=window._wpCustomizeSettings,s.settings){s.wpcom=new s.Wpcom({url:window.location.href,channel:s.settings.channel}),parent.loaded||(parent.loaded=1,e(".collapse-sidebar",parent.document).trigger("click"));var n=t();if(window.pid=0,2!=n.type&&4!=n.type||(window.pid=n.id),i[pid]||(i[pid]=[]),(2==n.type||4==n.type)&&e(".wpcom-container").length>0){e("body").append('<div id="wpcom-modules" class="wpcom-hide" style="right: -250px;"><div class="wpcom-close">&#xe600;</div><div class="mod-wrap"></div></div>');var d=e("#wpcom-modules");window.d1=new o({el:"#wrap",type:"add"}),new o({el:"#wrap",type:"move"}),d.on("click",".wpcom-close",function(){d.toggleClass("wpcom-hide"),d.hasClass("wpcom-hide")?(d.animate({right:"-250"},300),e(this).html("&#xe600;"),parent.showModules=0):(d.animate({right:"0"},300),e(this).html("&#xe606;"),parent.showModules=1)}),parent.showModules&&(d.animate({right:"0"},10),d.find(".wpcom-close").html("&#xe606;"),d.removeClass("wpcom-hide")),e.each(parent._modules,function(e,t){d.find(".mod-wrap").append('<div class="mod-item" data-type="'+e+'"><i class="fa fa-'+(t.icon||"gear")+'"></i>'+t.name+"</div>")}),e(document).on("mouseenter",".wpcom-modules",function(t){e(".wpcom-moving").length||(e(this).siblings().removeClass("wpcom-focus"),e(this).addClass("wpcom-focus"),0==e(this).find("> .wpcom-modules-tool").length&&e(this).append('<div class="wpcom-modules-tool"><div class="wpcom-tool-move">&#xe60b;</div><div class="wpcom-tool-edit">&#xe603;</div><div class="wpcom-tool-copy">&#xe60d;</div><div class="wpcom-tool-delete">&#xe602;</div></div>'))}).on("mouseleave",".wpcom-modules",function(){e(".wpcom-moving").length||e(this).removeClass("wpcom-focus")}).on("mouseenter",".wpcom-modules-tool",function(){e(this).closest(".wpcom-modules").addClass("wpcom-edit")}).on("mouseleave",".wpcom-modules-tool",function(){e(this).closest(".wpcom-modules").removeClass("wpcom-edit")}).on("click",".wpcom-modules a",function(){return!1}).on("click.wpcom.edit",".wpcom-tool-edit",function(){for(var t=e(this).closest(".wpcom-modules").data("id"),o=d1.allModules(),i=0;i<o.length;i++)t==o[i].id&&(window.modules_render=o[i]);var s=parent._modules[modules_render.type].name;s=s?"编辑【"+s+"】模块":"模块编辑",e("body").append('<div id="wpcom-modal-bg"></div><div id="wpcom-modal"><div class="wpcom-modal-wrap"><div class="wpcom-modal-head">'+s+'<div class="wpcom-modal-close">&#xe601;</div></div><iframe src="'+parent.ajaxurl+'?action=wpcom_modules" frameborder="0"></iframe></div></div>')}).on("click.wpcom.close",".wpcom-modal-close",function(){e("#wpcom-modal-bg, #wpcom-modal").remove(),(modules_render.settings&&0==_.size(modules_render.settings)||"gird"==modules_render.type&&void 0===modules_render.settings.columns||"fullwidth"==modules_render.type&&void 0===modules_render.settings.fluid)&&e("#modules-"+modules_render.id).find(".wpcom-tool-delete").trigger("click")}).on("click.wpcom.copy",".wpcom-tool-copy",function(){for(var t=e(this).closest(".wpcom-modules"),o=d1.allModules(),s=t.data("id"),n=d1.setID(),d={},r=0;r<o.length;r++)if(s==o[r].id){d=e.extend(!0,{},o[r]),d.id=n,i[pid].push(d);break}t.clone().removeClass("wpcom-focus").attr("id","modules-"+n).data("id",n).insertAfter(t),e("#modules-"+n).find(".wpcom-modules").each(function(t,s){for(var n=e(s),d=n.attr("id"),r=d.match(/modules-(\d+)$/),l=r?r[1]:"",c=d1.setID(),p={},t=0;t<o.length;t++)if(l==o[t].id){p=e.extend(!0,{},o[t]),p.id=c,i[pid].push(p);break}n.attr("id","modules-"+c).data("id",c)}),d1.index()}).on("click.wpcom.del",".wpcom-tool-delete",function(){e(this).closest(".wpcom-modules").remove(),d1.index()})}}}),window.updateModules=function(e){window.modules_render=e;var t={},o=d1.allModules();t[pid]=[];for(var s in i)s!=pid&&(t[s]=i[s]);for(var n=0;n<o.length;n++)e.id==o[n].id?t[pid].push(e):t[pid].push(o[n]);i[pid]=t[pid],parent.wp.customize("_page_modules",function(e){e.set(t),parent._wpCustomizeSettings.settings._page_modules.value=d1.index(),parent.wp.customize.previewer.refresh()})},o.prototype.init=function(){var t=this;this.initID(),"add"!=this.config.type||n.addBind?(n.moveBind||(n.moveBind={}),n.moveBind[this.config.el]||(this.$el.on("mousedown."+this.config.type,".wpcom-tool-move",function(e){return 0!=e.button&&1!=e.button||t.mouseDown(e),!1}),n.moveBind[this.config.el]=1)):(e(document.body).on("mousedown."+this.config.type,".mod-item",function(o){return t.addType=e(this).data("type"),0!=o.button&&1!=o.button||t.mouseDown(o),!1}),n.addBind=1),n.upBind||(n.upBind={}),n.upBind[this.config.type]||(e(document).on("mouseup."+this.config.type,function(e){0!=e.button&&1!=e.button||t.mouseUp(e)}),n.upBind[this.config.type]=1)},o.prototype.mouseDown=function(t){var o,i,s=this,n=0;if(this.active=this.config.type,e("body").addClass("wpcom-moving"),this.$container=this.$el.find(".wpcom-container"),this.$modules=this.$container.find(".wpcom-modules"),this.$modules2=this.$container.find("> .wpcom-modules"),"add"==this.config.type)o=e(t.target).closest(".mod-item"),e("body").append(o.clone().attr("id","wpcom-add-clone")),this.$dom=e("#wpcom-add-clone"),this.module=o.data("type");else{this.$dom=e(t.target).closest(".wpcom-modules");var d=this.$dom.data("id");o=this.$dom;for(var r=this.allModules(),l=0;l<r.length;l++)r[l].id==d&&(this.module=r[l].type)}o.parents(".modules-gird").length&&(o.parents(".modules-gird").removeClass("wpcom-focus"),n=parseInt(o.css("margin-left"))),o.parents(".j-modules-wrap").length&&(o.parents(".j-modules-wrap").removeClass("wpcom-focus"),n=parseInt(o.css("margin-left"))),this.clientX=t.clientX,this.clientY=t.clientY,this.scrollTop=e(window).scrollTop(),this.scrollLeft=e(window).scrollLeft(),i=parseInt(o.css("margin-top")),this.offset={left:o.offset().left-this.scrollLeft-n,top:o.offset().top-this.scrollTop-i},this.topToEl=this.clientY-this.offset.top,"add"==this.config.type&&this.$dom.css({position:"fixed",width:o.outerWidth(),height:o.outerHeight(),left:this.offset.left,top:this.offset.top,"z-index":99999,opacity:"0.8",background:"#DAFAE7"}),e(document).on("mousemove."+this.config.type,function(e){return s.mouseMove(e),!1})},o.prototype.mouseMove=function(t){if(this.active==this.config.type){this.scrollTop=e(window).scrollTop(),this.scrollLeft=e(window).scrollLeft(),this.clientX2=t.clientX,this.clientY2=t.clientY;var o=this.clientX2-this.clientX,i=this.clientY2-this.clientY;this.$dom.css({position:"fixed",width:this.$dom.outerWidth(),height:this.$dom.outerHeight(),left:this.offset.left+o,top:this.offset.top+i,"z-index":99999,opacity:"0.8"}),this.insert(this.$container,this.$modules,this.$modules2,i)}},o.prototype.mouseUp=function(t){var o=this;if(this.active==this.config.type){if(e("body").removeClass("wpcom-moving"),e(document).off("mousemove."+this.config.type),e(".wpcom-inner").length)if("add"==this.config.type){this.$dom.remove();var s=o.setID(),n={id:s,type:o.addType,settings:{}};i[pid].push(n),e(".wpcom-inner").replaceWith('<section class="section wpcom-modules" id="modules-'+s+'" style="height:32px;"></section>')}else this.$dom.attr("style",""),e(".wpcom-inner").replaceWith(this.$dom.clone()),this.$dom.remove();else"add"==this.config.type?this.$dom.remove():this.$dom.attr("style","");this.active="",this.initID(),this.index(),"add"==this.config.type?(e("#modules-"+s).trigger("mouseenter"),setTimeout(function(){e("#modules-"+s).find(".wpcom-tool-edit").trigger("click")},100)):setTimeout(function(){parent.wp.customize.previewer.refresh()},100)}},o.prototype.insert=function(t,o,i,s){var n=this;if(o.length<=1&&0==e(".wpcom-inner").length)return e(".wpcom-inner").remove(),void t.append('<div class="wpcom-inner"></div>');var d=0,r=0;i.length&&(d=i.eq(0).attr("id"),r=i.eq(i.length-1).attr("id")),o.each(function(t,o){var i=e(o);if(!i.hasClass("wpcom-focus")&&0==i.parents(".wpcom-focus").length){var l=parseInt(i.css("margin-top")),c=parseInt(i.css("margin-left")),p=i.hasClass("modules-gird"),a=i.hasClass("j-modules-wrap");if(i.position={left:i.offset().left-n.scrollLeft-c,top:i.offset().top-n.scrollTop-l,right:i.offset().left-n.scrollLeft-c+i.outerWidth(),bottom:i.offset().top-n.scrollTop-l+i.outerHeight()},n.offset.top+s+n.topToEl>i.position.top&&n.offset.top+s+n.topToEl<i.position.bottom&&(!p&&!a||a&&("fullwidth"==n.module||"sidebar-layout"==n.module)||p&&("gird"==n.module||"fullwidth"==n.module||"sidebar-layout"==n.module)))return i.closest(".modules-gird").length?n.offset.top+s>i.offset().top-n.scrollTop-l+i.outerHeight()/2&&i.position.left<n.clientX2&&i.position.right>n.clientX2?(e(".wpcom-inner").remove(),e('<div class="wpcom-inner"></div>').insertAfter(i)):i.position.left<n.clientX2&&i.position.right>n.clientX2&&(e(".wpcom-inner").remove(),e('<div class="wpcom-inner"></div>').insertBefore(i)):(e(".wpcom-inner").remove(),n.offset.top+s>i.offset().top-n.scrollTop-l+i.outerHeight()/2?e('<div class="wpcom-inner"></div>').insertAfter(i):e('<div class="wpcom-inner"></div>').insertBefore(i)),!1;if(n.offset.top+s+n.topToEl>i.position.top&&n.offset.top+s+n.topToEl<i.position.bottom&&a)e(".wpcom-inner").remove(),n.insert(i.find(".j-modules-inner"),i.find(".j-modules-inner").find(".wpcom-modules"),i.find(".j-modules-inner").find("> .wpcom-modules"),s);else if(n.offset.top+s+n.topToEl>i.position.top&&n.offset.top+s+n.topToEl<i.position.bottom&&p){e(".wpcom-inner").remove();var m=i.find(".modules-gird-inner");m.each(function(t,o){var i=e(o);i.position={left:i.offset().left-n.scrollLeft,right:i.offset().left-n.scrollLeft+i.outerWidth()},i.position.left<n.clientX2&&i.position.right>n.clientX2&&n.insert(i,i.find(".wpcom-modules"),i.find("> .wpcom-modules"),s)})}else d==i.attr("id")&&n.offset.top+s+n.topToEl<i.position.top?(e(".wpcom-inner").remove(),e('<div class="wpcom-inner"></div>').insertBefore(i)):r==i.attr("id")&&n.offset.top+s+n.topToEl>i.position.top&&(e(".wpcom-inner").remove(),e('<div class="wpcom-inner"></div>').insertAfter(i))}})},o.prototype.setID=function(){var t=this;if(!this.MID){for(var o=e(".wpcom-modules"),i=o.length+1;e("#modules-"+i).length;)i++;o.each(function(o,i){var s=e(i).attr("id"),n=s.match(/modules-(\d+)$/);t.MID=parseInt(t.MID)>parseInt(n[1])?t.MID:parseInt(n[1])})}return this.MID=this.MID+1,this.MID},o.prototype.index=function(){var t=this.$el.find(".wpcom-container > .wpcom-modules"),o={},s=this.allModules();o[pid]=[];for(var n in i)n!=pid&&(o[n]=i[n]);return t.each(function(t,i){var n=e(i),d=n.data("id");n.hasClass("j-modules-wrap")||n.addClass("container");for(var r=0;r<s.length;r++)if(s[r].id==d){n.hasClass("modules-gird")?(s[r].settings.girds=void 0!==s[r].settings.girds?s[r].settings.girds:[],n.find(".modules-gird-inner").each(function(t,o){s[r].settings.girds[t]=[],e(o).find(".wpcom-modules").each(function(o,i){var n=e(i);n.removeClass("container");for(var d=n.data("id"),l=0;l<s.length;l++)if(s[l].id==d){s[r].settings.girds[t].push(s[l]);break}})})):n.hasClass("j-modules-wrap")&&(s[r].settings.modules=[],n.find(".j-modules-inner > .wpcom-modules").each(function(t,o){var i=e(o),n=i.data("id"),d={};i.removeClass("container");for(var l=0;l<s.length;l++)if(s[l].id==n){d=e.extend(!0,{},s[l]);break}i.hasClass("modules-gird")&&(d.settings.girds=void 0!==d.settings.girds?d.settings.girds:[],i.find(".modules-gird-inner").each(function(t,o){d.settings.girds[t]=[],e(o).find(".wpcom-modules").each(function(o,i){var n=e(i);n.removeClass("container");for(var r=n.data("id"),l=0;l<s.length;l++)if(s[l].id==r){d.settings.girds[t].push(s[l]);break}})})),s[r].settings.modules.push(d)})),o[pid].push(s[r]);break}}),parent.wp.customize("_page_modules",function(e){e.set(o),parent._wpCustomizeSettings.settings._page_modules.value=o}),i=o,o},o.prototype.initID=function(){this.$el.find(".wpcom-modules").each(function(){var t=e(this).attr("id"),o=t.match(/modules-(\d+)$/);e(this).data("id",o[1])})},o.prototype.allModules=function(){for(var t=[],o=0;o<i[pid].length;o++)if("gird"==i[pid][o].type){i[pid][o].settings.girds=void 0!==i[pid][o].settings.girds?i[pid][o].settings.girds:[],e.each(i[pid][o].settings.girds,function(){e.each(this,function(){t.push(this)})});var s=e.extend(!0,{},i[pid][o]);s.settings.girds=[],t.push(s)}else if("fullwidth"==i[pid][o].type||"sidebar-layout"==i[pid][o].type){i[pid][o].settings.modules=void 0!==i[pid][o].settings.modules?i[pid][o].settings.modules:[],e.each(i[pid][o].settings.modules,function(){var o=this;if("gird"==o.type){o.settings.girds=void 0!==o.settings.girds?o.settings.girds:[],e.each(o.settings.girds,function(){e.each(this,function(){t.push(this)})});var i=e.extend(!0,{},o);i.settings.girds=[],t.push(i)}t.push(o)});var n=e.extend(!0,{},i[pid][o]);n.settings.modules=[],t.push(n)}else t.push(i[pid][o]);return t}}(jQuery)},{}]},{},[1]);